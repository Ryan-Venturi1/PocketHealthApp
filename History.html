<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PocketHealth | History</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="mainstyle.css">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="app-body">
  <!-- Sidebar Navigation -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="app-logo">
        <h1>PocketHealth</h1>
      </div>
      <button id="sidebar-close" class="sidebar-toggle">
        <!-- X icon -->
        <svg width="24" height="24" viewBox="0 0 24 24"><line x1="6" y1="6" x2="18" y2="18" stroke="#333" stroke-width="2"/><line x1="18" y1="6" x2="6" y2="18" stroke="#333" stroke-width="2"/></svg>
      </button>
    </div>
    <div class="user-info">
      <h3 id="user-name">User</h3>
      <p id="user-email">user@email.com</p>
    </div>
    <nav class="sidebar-nav">
      <ul>
        <li>
          <a href="dashboard.html">
            <!-- Dashboard icon -->
            <svg width="24" height="24" viewBox="0 0 24 24"><rect x="3" y="11" width="7" height="10" fill="#2563EB"/><rect x="14" y="3" width="7" height="18" fill="#60A5FA"/></svg>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a href="health-tests.html">
            <!-- Health Tests icon -->
            <svg width="24" height="24" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="4" fill="#059669"/><rect x="9" y="9" width="6" height="6" rx="3" fill="#fff"/></svg>
            <span>Health Tests</span>
          </a>
        </li>
        <li>
          <a href="health-assistant.html">
            <!-- AI Assistant icon -->
            <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#F59E42"/><ellipse cx="12" cy="15" rx="5" ry="2" fill="#fff"/></svg>
            <span>AI Assistant</span>
          </a>
        </li>
        <li class="active">
          <a href="history.html">
            <!-- History icon -->
            <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#FBBF24"/><path d="M12 7v5l4 2" stroke="#fff" stroke-width="2" stroke-linecap="round"/></svg>
            <span>History</span>
          </a>
        </li>
        <li>
          <a href="settings.html">
            <!-- Settings icon -->
            <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#A78BFA"/><circle cx="12" cy="12" r="4" fill="#fff"/></svg>
            <span>Settings</span>
          </a>
        </li>
      </ul>
    </nav>
    <div class="sidebar-footer">
      <a id="btn-emergency" class="btn-emergency" href="https://www.911.gov" target="_blank" rel="noopener">
        <!-- 911 icon -->
        <svg width="24" height="24" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="6" fill="#DC2626"/><text x="12" y="17" text-anchor="middle" font-size="10" fill="#fff" font-family="Arial">911</text></svg>
        <span>Emergency</span>
      </a>
      <button id="btn-logout" class="btn-logout">
        <!-- Logout icon -->
        <svg width="24" height="24" viewBox="0 0 24 24"><path d="M16 17l5-5-5-5" stroke="#333" stroke-width="2" fill="none"/><path d="M21 12H9" stroke="#333" stroke-width="2" fill="none"/><rect x="3" y="4" width="6" height="16" rx="2" fill="#A1A1AA"/></svg>
        <span>Sign Out</span>
      </button>
    </div>
  </aside>
  
  <!-- Main Content -->
  <main class="main-content">
    <header class="main-header">
      <button id="sidebar-open" class="sidebar-toggle mobile-only">
        <!-- Plus icon -->
        <svg width="24" height="24" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19" stroke="#333" stroke-width="2"/><line x1="5" y1="12" x2="19" y2="12" stroke="#333" stroke-width="2"/></svg>
      </button>
      <div class="page-title">
        <h2 id="current-page-title">History</h2>
      </div>
      <div class="header-actions">
        <button id="notifications-toggle" class="btn-icon">
          <!-- Bell icon -->
          <svg width="24" height="24" viewBox="0 0 24 24"><path d="M12 22a2 2 0 002-2H10a2 2 0 002 2zm6-6V11a6 6 0 10-12 0v5l-2 2v1h16v-1l-2-2z" fill="#F59E42"/></svg>
          <span class="notification-indicator"></span>
        </button>
        <div class="quick-actions">
          <button id="quick-test" class="btn-secondary" data-nav="health-tests">
            <span>Quick Test</span>
          </button>
          <button id="talk-assistant" class="btn-primary" data-nav="assistant">
            <span>Talk to Assistant</span>
          </button>
        </div>
      </div>
    </header>
    
    <!-- History Content -->
    <div class="content-container">
      <div class="history-page page-content active" id="history-page">
        <div class="history-header">
          <h3>Your Health Activity</h3>
          <div class="history-filters">
            <div class="filter-group">
              <label for="history-filter">Filter by:</label>
              <select id="history-filter">
                <option value="all">All Activities</option>
                <option value="skin">Skin Analysis</option>
                <option value="wound">Wound Assessment</option>
                <option value="vision">Vision Tests</option>
                <option value="hearing">Hearing Tests</option>
                <option value="vitals">Vital Signs</option>
                <option value="motion">Range of Motion</option>
                <option value="assistant">AI Consultations</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="date-range">Time period:</label>
              <select id="date-range">
                <option value="week">Last 7 days</option>
                <option value="month">Last 30 days</option>
                <option value="year">Last year</option>
                <option value="all">All time</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="history-timeline">
          <!-- April 2025 -->
          <div class="timeline-month">
            <h4>April 2025</h4>
            
            <div class="timeline-item">
              <div class="timeline-date">
                <div class="date-circle">16</div>
                <div class="date-line"></div>
              </div>
              <div class="timeline-content">
                <div class="activity-item">
                  <div class="activity-icon">
                    <!-- Heart SVG -->
                    <svg width="24" height="24" viewBox="0 0 24 24"><path d="M12 21s-6-4.35-9-8.5C-1.5 7.5 4.5 3 12 10.5 19.5 3 25.5 7.5 21 12.5 18 16.65 12 21 12 21z" fill="#F87171"/></svg>
                  </div>
                  <div class="activity-details">
                    <h4>Heart Rate Measured</h4>
                    <p>Result: 72 bpm - Normal</p>
                    <span class="activity-date">Apr 16, 2025 - 9:30 AM</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-date">
                <div class="date-circle">15</div>
                <div class="date-line"></div>
              </div>
              <div class="timeline-content">
                <div class="activity-item">
                  <div class="activity-icon">
                    <!-- Vision SVG -->
                    <svg width="24" height="24" viewBox="0 0 24 24"><ellipse cx="12" cy="12" rx="10" ry="6" fill="#2563EB"/><circle cx="12" cy="12" r="3" fill="#1E3A8A"/></svg>
                  </div>
                  <div class="activity-details">
                    <h4>Vision Test Completed</h4>
                    <p>Result: 20/30 - Mild visual impairment</p>
                    <span class="activity-date">Apr 15, 2025 - 2:45 PM</span>
                  </div>
                </div>
                
                <div class="activity-item">
                  <div class="activity-icon">
                    <!-- Skin SVG -->
                    <svg width="24" height="24" viewBox="0 0 24 24"><ellipse cx="12" cy="16" rx="8" ry="6" fill="#F59E42"/><ellipse cx="12" cy="10" rx="6" ry="4" fill="#FBBF24"/></svg>
                  </div>
                  <div class="activity-details">
                    <h4>Skin Analysis Completed</h4>
                    <p>Result: Normal skin - No concerns detected</p>
                    <span class="activity-date">Apr 15, 2025 - 10:15 AM</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-date">
                <div class="date-circle">14</div>
                <div class="date-line"></div>
              </div>
              <div class="timeline-content">
                <div class="activity-item">
                  <div class="activity-icon">
                    <!-- Assistant SVG -->
                    <svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#F59E42"/><ellipse cx="12" cy="15" rx="5" ry="2" fill="#fff"/></svg>
                  </div>
                  <div class="activity-details">
                    <h4>AI Consultation</h4>
                    <p>Topic: Headache and fatigue</p>
                    <span class="activity-date">Apr 14, 2025 - 4:15 PM</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- March 2025 -->
          <div class="timeline-month">
            <h4>March 2025</h4>
            
            <div class="timeline-item">
              <div class="timeline-date">
                <div class="date-circle">28</div>
                <div class="date-line"></div>
              </div>
              <div class="timeline-content">
                <div class="activity-item">
                  <div class="activity-icon">
                    <!-- Hearing SVG -->
                    <svg width="24" height="24" viewBox="0 0 24 24"><path d="M12 3C7 3 3 7 3 12c0 5 4 9 9 9s9-4 9-9c0-5-4-9-9-9zm0 16a7 7 0 110-14 7 7 0 010 14z" fill="#059669"/></svg>
                  </div>
                  <div class="activity-details">
                    <h4>Hearing Test Completed</h4>
                    <p>Result: Normal hearing range</p>
                    <span class="activity-date">Mar 28, 2025 - 11:30 AM</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-date">
                <div class="date-circle">22</div>
                <div class="date-line"></div>
              </div>
              <div class="timeline-content">
                <div class="activity-item">
                  <div class="activity-icon">
                    <!-- Wound SVG -->
                    <svg width="24" height="24" viewBox="0 0 24 24"><rect x="8" y="11" width="8" height="2" rx="1" fill="#B91C1C"/><rect x="11" y="8" width="2" height="8" rx="1" fill="#B91C1C"/></svg>
                  </div>
                  <div class="activity-details">
                    <h4>Wound Assessment Completed</h4>
                    <p>Result: Minor cut - Low infection risk</p>
                    <span class="activity-date">Mar 22, 2025 - 3:20 PM</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="history-load-more">
          <button id="load-more-history" class="btn-secondary">Load More</button>
        </div>
        
        <div class="history-export">
          <button id="export-history" class="btn-primary">
            <svg width="20" height="20" viewBox="0 0 20 20"><path d="M10 2v10m-4-4l4 4 4-4" stroke="#fff" stroke-width="2" fill="none"/><path d="M3 12v4h14v-4" stroke="#fff" stroke-width="2" fill="none"/></svg>
            Export Health Data
          </button>
        </div>
      </div>
    </div>
  </main>
  
  <!-- Notifications Panel (Hidden by default) -->
  <div class="notifications-panel" id="notifications-panel">
    <div class="notifications-header">
      <h3>Notifications</h3>
      <button id="notifications-close" class="btn-icon">
        <svg width="20" height="20" viewBox="0 0 20 20"><line x1="5" y1="5" x2="15" y2="15" stroke="#333" stroke-width="2"/><line x1="15" y1="5" x2="5" y2="15" stroke="#333" stroke-width="2"/></svg>
      </button>
    </div>
    
    <div class="notifications-list">
      <div class="notification-item unread">
        <div class="notification-icon">
          <img src="assets/images/icons/reminder.svg" alt="Reminder">
        </div>
        <div class="notification-content">
          <h4>Hearing Test Reminder</h4>
          <p>Your scheduled hearing test is due in 2 days.</p>
          <span class="notification-time">2 hours ago</span>
        </div>
      </div>
      
      <div class="notification-item unread">
        <div class="notification-icon">
          <img src="assets/images/icons/tip.svg" alt="Tip">
        </div>
        <div class="notification-content">
          <h4>Health Tip</h4>
          <p>Remember to take frequent breaks to reduce eye strain when using digital devices.</p>
          <span class="notification-time">5 hours ago</span>
        </div>
      </div>
      
      <div class="notification-item">
        <div class="notification-icon">
          <img src="assets/images/icons/result.svg" alt="Result">
        </div>
        <div class="notification-content">
          <h4>Test Results Available</h4>
          <p>Your vision test results are now ready to view.</p>
          <span class="notification-time">Yesterday</span>
        </div>
      </div>
    </div>
    
    <button class="btn-text mark-all-read">Mark all as read</button>
  </div>
  
  <!-- Modal Containers -->
  <div class="modal-backdrop" id="modal-backdrop"></div>
  <div class="modal-container" id="modal-container"></div>
  
  <!-- History Styles -->
  <style>
    .history-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 24px;
      gap: 16px;
    }
    
    .history-filters {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    
    .filter-group {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .filter-group label {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    
    .filter-group select {
      padding: 8px 12px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background-color: white;
    }
    
    .history-timeline {
      margin-bottom: 24px;
    }
    
    .timeline-month {
      margin-bottom: 24px;
    }
    
    .timeline-month h4 {
      font-size: 1.125rem;
      color: var(--primary);
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }
    
    .timeline-item {
      display: flex;
      margin-bottom: 16px;
    }
    
    .timeline-date {
      width: 60px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .date-circle {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: var(--primary-light);
      color: var(--primary-dark);
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 4px;
    }
    
    .date-line {
      width: 2px;
      flex-grow: 1;
      background-color: var(--border);
    }
    
    .timeline-content {
      flex: 1;
      background-color: white;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: 16px;
      margin-left: 16px;
    }
    
    .timeline-content .activity-item {
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border-light);
      margin-bottom: 16px;
    }
    
    .timeline-content .activity-item:last-child {
      padding-bottom: 0;
      border-bottom: none;
      margin-bottom: 0;
    }
    
    .history-load-more {
      text-align: center;
      margin-bottom: 24px;
    }
    
    .history-export {
      text-align: center;
    }
    
    .history-export button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    @media (max-width: 768px) {
      .history-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .history-filters {
        width: 100%;
        flex-direction: column;
      }
      
      .filter-group {
        width: 100%;
      }
      
      .filter-group select {
        flex: 1;
      }
    }
  </style>
  
  <!-- Load Application Scripts -->
  <script src="js/app.js" type="module"></script>
  <script src="js/dashboard.js" type="module"></script>
  
  <script>
    // Initialize History page functionality
    document.addEventListener('DOMContentLoaded', () => {
      // Set up sidebar toggle for mobile
      const sidebarOpen = document.getElementById('sidebar-open');
      const sidebarClose = document.getElementById('sidebar-close');
      const sidebar = document.querySelector('.sidebar');
      
      if (sidebarOpen) {
        sidebarOpen.addEventListener('click', () => {
          sidebar.classList.add('open');
        });
      }
      
      if (sidebarClose) {
        sidebarClose.addEventListener('click', () => {
          sidebar.classList.remove('open');
        });
      }
      
      // Set up notifications panel
      const notificationsToggle = document.getElementById('notifications-toggle');
      const notificationsPanel = document.getElementById('notifications-panel');
      const notificationsClose = document.getElementById('notifications-close');
      const modalBackdrop = document.getElementById('modal-backdrop');
      
      if (notificationsToggle) {
        notificationsToggle.addEventListener('click', () => {
          notificationsPanel.classList.toggle('open');
          modalBackdrop.classList.toggle('open');
        });
      }
      
      if (notificationsClose) {
        notificationsClose.addEventListener('click', () => {
          notificationsPanel.classList.remove('open');
          modalBackdrop.classList.remove('open');
        });
      }
      
      if (modalBackdrop) {
        modalBackdrop.addEventListener('click', () => {
          notificationsPanel.classList.remove('open');
          modalBackdrop.classList.remove('open');
        });
      }
      
      // History-specific functionality
      const historyFilter = document.getElementById('history-filter');
      const dateRange = document.getElementById('date-range');
      const loadMoreButton = document.getElementById('load-more-history');
      const exportButton = document.getElementById('export-history');
      
      // Filter change event
      if (historyFilter) {
        historyFilter.addEventListener('change', () => {
          filterHistory();
        });
      }
      
      if (dateRange) {
        dateRange.addEventListener('change', () => {
          filterHistory();
        });
      }
      
      // Load more button
      if (loadMoreButton) {
        loadMoreButton.addEventListener('click', () => {
          // This would load older history entries from the database
          // For now, we'll just show a message
          alert('In a full implementation, this would load older entries from your health history.');
        });
      }
      
      // Export button
      if (exportButton) {
        exportButton.addEventListener('click', () => {
          // This would export health data to a file
          // For now, we'll just show a message
          alert('In a full implementation, this would export your health data to a downloadable file.');
        });
      }
      
      // Function to filter history based on selected options
      function filterHistory() {
        // This would filter the history entries based on the selected filter options
        // For now, we'll just log the selected options
        console.log('Filter:', historyFilter.value);
        console.log('Date range:', dateRange.value);
        
        // In a real implementation, we would query the database with these filters
        // and update the displayed history entries accordingly
      }
      
      // Initialize by loading history data from Firebase in a real implementation
      // For now, we're using the static data in the HTML
    });
  </script>
</body>
</html>